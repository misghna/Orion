 <app-header (loadUser)="loadUserTable()"></app-header>


<table class="table table-striped" [mfData]="data" #mf="mfDataTable" [mfRowsOnPage]="5" >
    <thead>
    <tr>
        <th style="width: 30%">
            <mfDefaultSorter by="name">Full Name</mfDefaultSorter>
        </th>
        <th style="width: 30%">
            <mfDefaultSorter by="email">Email</mfDefaultSorter>
        </th>
        <th style="width: 20%">
            <mfDefaultSorter by="age">Role</mfDefaultSorter>
        </th>
        <th style="width: 20%">
            <mfDefaultSorter by="city">status</mfDefaultSorter>
        </th>
        <th style="width: 5%">
            <mfDefaultSorter by="name">Action</mfDefaultSorter>
        </th>
    </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of mf.data">        
        <td class="text-left" >{{user.fullname}}</td>
        <td class="text-left">{{user.email}}</td>
        <td class="text-left">{{user.role}}</td>
        <td class="text-left">{{user.status}}</td>
        <td class="text-center" >
            <div class="dropdown" style="border: 0">
            <button id= {{user.id}} class="btn btn-default dropdown-toggle" 
                [class.disabled]="loggedUserId == user.id ? true : false"
                style="border:0px solid transparent !important" type="button" id="dropdownMenu1"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                <span class="caret"></span>
            </button>
            <ul id={{user.header}} #dropDownBox class="dropdown-menu dropdown-menu-right" 
                (click)="transferDetail(dropDownBox.id)" aria-labelledby="dropdownMenu1">
                <li><a #activateuser (click)="activateUser(activateuser.parentElement.parentElement.id,activateuser.text)">{{user.status == 'Active' ? 'Deactivate' : 'Activate'}}</a></li>
                <li role="separator" class="divider"></li>
                <li><a #changerole (click)="changeRole(changerole.parentElement.parentElement.id,changerole.text)">Change to role to {{user.role == 'User' ? 'Admin' : 'User'}}</a></li>
                <li role="separator" class="divider"></li>
                <li><a #deleteuser data-toggle="modal" data-target="#userModal"
                 (click)="storeUserId(deleteuser.parentElement.parentElement.id)">Delete</a></li>
            </ul>
            </div>
        </td>
      </tr>
    </tbody>
    <tfoot>
    <tr>
        <td colspan="4">
            <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25]"></mfBootstrapPaginator>
        </td>
    </tr>
    </tfoot>
</table>

  <!-- Modal -->
  <div class="modal fade" id="userModal" role="dialog">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">User</h4>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to delete user '{{detail}}'?</p>
        </div>
        <div class="modal-footer">
          <button type="button" (click) = "deleteUser()" class="btn btn-danger" data-dismiss="modal">Yes</button>
          <button type="button" (click) = "clearUserId()" class="btn btn-default" data-dismiss="modal">No</button>
        </div>
      </div>
    </div>
  </div>