 <app-header (loadItem)="loadItemsTable()" 
        (activateSearch)="search($event)"
    [loaderHidden]="hideLoader"></app-header>

<!--Filter by name:<input class="form-control" [(ngModel)]="filterQuery"/>-->


<div class="alert alert-auto" alert-dismissible
    [ngClass]="{
      'hidden' : alertHidden,
      'alert-danger' :  alertType == 'Error',
      'alert-success' : alertType == 'Info'
    }"
>
<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
  <strong>{{alertType}}!</strong> {{itemMsg}}
</div>
<form id="login" (submit)="addItem($event, productName.value, hsCode.value,financialService.value,customerTax.value,stampTax.value,fees.value,others.value)">
<table class="table table-striped" [mfData]="data" #mf="mfDataTable" [mfRowsOnPage]="10">
    <thead>
    <tr>
        <th style="width: 5%">
            <mfDefaultSorter by="id">Id</mfDefaultSorter>
        </th>
        <th style="width: 35%">
            <mfDefaultSorter by="product">Product</mfDefaultSorter>
        </th>
        <th style="width: 10%">
            <mfDefaultSorter by="hsCode">HSCode</mfDefaultSorter>
        </th>
        <th style="width: 10%">
            <mfDefaultSorter by="financialService">Financial Service(%)</mfDefaultSorter>
        </th>
        <th style="width: 7%">
            <mfDefaultSorter by="consumerTax">Consumer Tax(%)</mfDefaultSorter>
        </th>
        <th style="width: 7%">
            <mfDefaultSorter by="stampTax">Stamp Tax(%)</mfDefaultSorter>
        </th>
        <th style="width: 7%">
            <mfDefaultSorter by="fees">Fees(%)</mfDefaultSorter>
        </th>
        <th style="width: 7%">
            <mfDefaultSorter by="others">Others(%)</mfDefaultSorter>
        </th>
        <th style="width: 5%">
             Action
        </th>
    </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of mf.data; let i = index">    
        <td class="text-left" >{{i+1}}</td>    
        <td class="text-left" >{{item.product}}</td>
        <td class="text-left">{{item.hsCode}}</td>
        <td class="text-center">{{item.financialServices}}</td>
        <td class="text-center">{{item.consumerTax}}</td>
        <td class="text-center">{{item.stampTax}}</td>
        <td class="text-center">{{item.fees}}</td>
        <td class="text-center">{{item.others}}</td>
        <td class="text-center" >
            <div class="dropdown" style="border: 0">
            <button id= "{{item.id.toString() + '-' + item.product}}" #dropButton class="btn btn-default dropdown-toggle"
                (click)="activeProductHeader = dropButton.id"
                 style="border:0px solid transparent !important" type="button" id="dropdownMenu1"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                <span class="caret"></span>
            </button>
            <ul id="{{item.id.toString() + '-' + item.product}}" #dropDownBox class="dropdown-menu dropdown-menu-right" 
                 aria-labelledby="dropdownMenu1">
                <li><a #edit_item (click)="editItem(edit_item.parentElement.parentElement.id)">Edit</a></li>
                 <li role="separator" class="divider"></li>
                <li><a #deleteitem data-toggle="modal" data-target="#itemModal">Delete</a></li>
            </ul>
            </div>
        </td>
      </tr>
    </tbody>
    
    <tfoot>
      
      <tr [class.hidden]="hideAddNewForm" class="inputFormTr">
        <td class="text-center" ><span class="glyphicon glyphicon-plus" aria-hidden="true" style="margin-top:5px"></span></td>    
        <td><textarea id="productName" #productName class="form-control txt-flat" rows="1"  placeholder="Product Name" required>{{itemDetail.product}}</textarea></td> 
        <td><textarea id="hsCode" #hsCode class="form-control txt-flat" rows="1"  placeholder="HS Code" required>{{itemDetail.hsCode}}</textarea></td> 
        <td><textarea id="financialService" #financialService class="form-control txt-flat" rows="1"  placeholder="Financial Service" required>{{itemDetail.financialServices}}</textarea></td> 
        <td><textarea id="customerTax" #customerTax class="form-control txt-flat" rows="1"  placeholder="Customer Tax" required>{{itemDetail.consumerTax}}</textarea></td> 
        <td><textarea id="stampTax" #stampTax class="form-control txt-flat" rows="1"  placeholder="Stamp Tax" required>{{itemDetail.stampTax}}</textarea></td> 
        <td><textarea id="fees" #fees class="form-control txt-flat" rows="1"  placeholder="Fees" required>{{itemDetail.fees}}</textarea></td> 
        <td><textarea id="others" #others class="form-control txt-flat" rows="1"  placeholder="Others" required>{{itemDetail.others}}</textarea></td> 
        <td class="text-left" ><input type="submit" class="btn btn-success" value="{{taskType}}"/></td>
      </tr>      
    <tr>
        <td colspan="4">
            <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25]"></mfBootstrapPaginator>

        </td>
        <td colspan="4" >
              <button class="btn btn-default pull-right" style="margin-right:10px;margin-top:20px" (click)="showAddForm()">
              <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> New Item</button>
        </td>
    </tr>
    </tfoot>
</table>
</form>


  <!-- Modal -->
  <div class="modal fade" id="itemModal" role="dialog">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">item</h4>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to delete '{{activeProductHeader | filterName}}'?</p>
        </div>
        <div class="modal-footer">
          <button type="button" (click) = "deleteItem()" class="btn btn-danger" data-dismiss="modal">Yes</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
        </div>
      </div>
    </div>
  </div>